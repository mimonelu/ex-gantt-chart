(function(t){function e(e){for(var a,s,i=e[0],l=e[1],u=e[2],c=0,f=[];c<i.length;c++)s=i[c],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/ex-gantt-chart/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var d=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"4cd7":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("ExGanttChart")]),r("ExGanttChart",t._b({ref:"exGanttChart",on:{clickBar:t.onClickBar,mouseEnterBar:t.onMouseEnterBar,mouseLeaveBar:t.onMouseLeaveBar}},"ExGanttChart",t.exGanttChartProps,!1)),r("div",{staticClass:"info-container"},[r("pre",[t._v(t._s(JSON.stringify(t.exGanttChartProps)))]),r("pre",[t._v(t._s(t.currentBarInfo))])])],1)},o=[],s=(r("99af"),r("d3b7"),r("a15b"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ex-gantt-chart",attrs:{"data-dragging":t.dragging.toString(),"data-resizing":t.resizing.toString()},on:{mouseup:t.onMouseUp}},[r("table",[r("thead",[r("tr",[t.visibleHeaders?t._l(t.headers,(function(e,a){return r("th",t._b({key:"head-header-"+a,class:e.classes},"th",e.attrs,!1),[r("div",{staticClass:"head-header-label",domProps:{innerHTML:t._s(e.label)}})])})):t._e(),r("td",[r("div",{staticClass:"head-content",style:"grid-template-columns: repeat("+t.dateOfTerm+", 1fr);"},t._l(t.datesInTerm,(function(e,a){return r("div",{key:"date-"+a,staticClass:"date",attrs:{"data-today":t.isToday(e),"data-day-of-week":e.getDay()}},[r("div",{staticClass:"separator-label-container",style:"grid-template-columns: repeat("+t.numberOfSubSeparators+", 1fr);"},t._l(t.numberOfSubSeparators,(function(e){return r("div",{key:e,staticClass:"separator-label"},[t._v(t._s((e-1)*t.subSeparatorSpan))])})),0),r("div",{staticClass:"date-label",domProps:{innerHTML:t._s(t.dateFormatter(e))}})])})),0)])],2)]),r("tbody",t._l(t.body,(function(e,a){return r("tr",{key:"body-row-"+a},[t.visibleHeaders?t._l(e.headers,(function(e,n){return r("th",t._b({key:"body-header-"+a+"-"+n,class:e.classes,style:{display:e.rowSpan?"none":""},attrs:{rowspan:t.rowSpan(a,n)}},"th",e.attrs,!1),[r("div",{staticClass:"body-header-label",domProps:{innerHTML:t._s(e.label)}})])})):t._e(),r("td",t._b({ref:"td-"+a,refInFor:!0,class:e.classes,on:{dragenter:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()},drop:function(e){t.canDrop(a)&&t.onDrop(e,a)},mousemove:t.onMouseMove}},"td",e.attrs,!1),[r("div",{staticClass:"separator-container",style:"grid-template-columns: repeat("+t.dateOfTerm+", 1fr);"},t._l(t.datesInTerm,(function(e,a){return r("div",{key:a,staticClass:"main-separator",style:"grid-template-columns: repeat("+t.numberOfSubSeparators+", 1fr);",attrs:{"data-today":t.isToday(e),"data-day-of-week":e.getDay()}},t._l(t.numberOfSubSeparators,(function(t){return r("div",{key:t,staticClass:"sub-separator"})})),0)})),0),t._l(e.bars,(function(e,n){return r("div",t._b({key:t.barId(a,n),ref:t.barId(a,n),refInFor:!0,staticClass:"bar",class:e.classes,attrs:{"data-bar-id":t.barId(a,n),"data-visible":t.barVisible(a,n).toString(),draggable:!t.resizing&&t.canDrag(n,a)},on:{dragstart:function(e){!t.resizing&&t.onDragStart(e,a,n)},dragend:t.onDragEnd,click:function(r){return t.$emit("clickBar",{event:r,bar:e,rowIndex:a,barIndex:n,component:t.self})},mouseenter:function(r){return t.$emit("mouseEnterBar",{event:r,bar:e,rowIndex:a,barIndex:n,component:t.self})},mouseleave:function(r){return t.$emit("mouseLeaveBar",{event:r,bar:e,rowIndex:a,barIndex:n,component:t.self})}}},"div",e.attrs,!1),[t.canResize(n,a)?r("div",{staticClass:"bar-handle",on:{mousedown:function(e){return t.onMouseDown(e,a,n,"from")}}}):t._e(),r("div",{staticClass:"bar-content",domProps:{innerHTML:t._s(e.label)}}),t.canResize(n,a)?r("div",{staticClass:"bar-handle",on:{mousedown:function(e){return t.onMouseDown(e,a,n,"to")}}}):t._e()])}))],2)],2)})),0)])])}),i=[],l=r("b85c"),u=(r("a9e3"),r("b64b"),r("caad"),r("2532"),r("a434"),"application/ikzo-bar-index");function d(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0)}function c(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}function f(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var a=0,n=e;a<n.length;a++){var o=n[a];if(null!=o)return o}return null}var h={name:"ExGanttChart",props:{from:{type:Date,default:function(){var t=new Date;return t.setDate(t.getDate()-3),d(t)}},to:{type:Date,default:function(){var t=new Date;return t.setDate(t.getDate()+3),c(t)}},headers:{type:Array,required:!0},visibleHeaders:{type:Boolean,default:!0},dateFormatter:{type:Function,default:function(t){return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}},body:{type:Array,required:!0},allowParallel:{type:Boolean,default:!0},allowDrag:{type:Boolean,default:!0},allowDrop:{type:Boolean,default:!0},dropToLast:{type:Boolean,default:!0},allowResize:{type:Boolean,default:!0},subSeparatorSpan:{type:Number,default:6}},data:function(){return{dragging:!1,resizing:!1,resizingType:null,resizingBar:null,resizingRowIndex:0}},computed:{self:function(){return this},fromDate:function(){return d(this.from)},toDate:function(){return c(this.to)},fromTime:function(){return this.fromDate.getTime()},toTime:function(){return this.toDate.getTime()},datesInTerm:function(){for(var t=[],e=0;e<this.dateOfTerm;e++){var r=new Date(this.fromDate);r.setDate(r.getDate()+e),t.push(r)}return t},timeOfTerm:function(){return this.toTime-this.fromTime},dateOfTerm:function(){return Math.round(this.timeOfTerm/1e3/60/60/24)},isToday:function(){return function(t){return(new Date).toDateString()===t.toDateString()}},rowSpan:function(){var t=this;return function(e,r){if(t.body[e].headers[r].rowSpan)return null;for(var a=0,n=e+1;n<t.body.length;n++,a++){var o=t.body[n].headers[r];if(void 0===o||!o.rowSpan)break}return 0===a?null:a+1}},barId:function(){return function(t,e){return"bar-".concat(t,"-").concat(e)}},barVisible:function(){var t=this;return function(e,r){var a=t.body[e].bars[r];if(null!=a.visible&&!a.visible)return!1;var n=a.from.getTime(),o=a.to.getTime();return n<=t.toTime&&t.fromTime<=o}},numberOfSubSeparators:function(){return this.subSeparatorSpan>0?Math.floor(24/this.subSeparatorSpan):0}},mounted:function(){this.updateBarsAll()},methods:{updateBarsAll:function(){for(var t=0;t<this.body.length;t++)this.updateBarsInRow(t)},updateBarsInRow:function(t){for(var e=this.body[t].bars,r=0;r<e.length;r++)if(this.barVisible(t,r)){var a=e[r],n=this.barId(t,r),o=this.$el.querySelector('[data-bar-id="'.concat(n,'"]'));if(o){var s=a.from.getTime(),i=a.to.getTime(),u=(s-this.fromTime)/this.timeOfTerm*100,d=(i-s)/this.timeOfTerm*100;o.style.position="relative",o.style.left="".concat(u,"%"),o.style.width="".concat(d,"%")}}if(this.allowParallel){for(var c={},f=0;f<e.length;f++){var h;if(this.barVisible(t,f)){var b=e[f],p=b.from.getTime(),m=b.to.getTime(),v=this.barId(t,f),g=this.$el.querySelector('[data-bar-id="'.concat(v,'"]'));if(g){for(var y=0,w=0;w<f;w++)if(this.barVisible(t,w)){var D=e[w],T=D.from.getTime(),S=D.to.getTime();if(T<=m&&p<=S){var x=this.barId(t,w),I=this.$el.querySelector('[data-bar-id="'.concat(x,'"]')),O=I.offsetTop+I.offsetHeight;y=Math.max(y,O)}}for(var _=Object.keys(c),z=0,B=_;z<B.length;z++){var M,C=B[z],k=!1,R=Object(l["a"])(c[C]);try{for(R.s();!(M=R.n()).done;){var j=M.value,H=j.from.getTime(),P=j.to.getTime();if(H<=m&&p<=P){k=!0;break}}}catch(N){R.e(N)}finally{R.f()}if(!1===k){y=C;break}}g.style.position="absolute",g.style.top="".concat(y,"px"),c[y]=null!==(h=c[y])&&void 0!==h?h:[],c[y].push(b)}}}for(var E=0,L=0;L<e.length;L++)if(this.barVisible(t,L)){var $=this.barId(t,L),F=this.$el.querySelector('[data-bar-id="'.concat($,'"]'));if(F){var G=F.offsetTop+F.offsetHeight;E=Math.max(E,G)}}var A=this.$refs["td-".concat(t)];A&&(A[0].style.height="".concat(E,"px"))}},canDrag:function(t,e){var r,a,n;return f(null===(r=this.body[e])||void 0===r||null===(a=r.bars[t])||void 0===a?void 0:a.allowDrag,null===(n=this.body[e])||void 0===n?void 0:n.allowDrag,this.allowDrag)},canDrop:function(t){var e;return f(null===(e=this.body[t])||void 0===e?void 0:e.allowDrop,this.allowDrop)},onDragStart:function(t,e,r){this.dragging=!0,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(u,JSON.stringify({rowIndex:e,barIndex:r,offset:t.offsetX}))},onDragEnd:function(){this.dragging=!1},onDrop:function(t,e){if(t.dataTransfer.types.includes(u)){var r,a;t.preventDefault();var n=t.dataTransfer.getData(u),o=JSON.parse(n),s=this.body[o.rowIndex].bars[o.barIndex],i=t.offsetX,l=t.target;while(null!=l&&"TD"!==l.tagName)i+=l.offsetLeft,l=l.parentNode;var d=null!==(r=null===(a=l)||void 0===a?void 0:a.offsetWidth)&&void 0!==r?r:0,c=(i-o.offset)/d,f=this.timeOfTerm*c+this.fromTime,h=s.to.getTime()-s.from.getTime()+f;s.from.setTime(f),s.to.setTime(h),e!==o.rowIndex&&(this.dropToLast?this.body[e].bars.push(s):this.body[e].bars.unshift(s),this.body[o.rowIndex].bars.splice(o.barIndex,1)),this.$nextTick(this.updateBarsAll)}},canResize:function(t,e){var r,a,n;return f(null===(r=this.body[e])||void 0===r||null===(a=r.bars[t])||void 0===a?void 0:a.allowResize,null===(n=this.body[e])||void 0===n?void 0:n.allowResize,this.allowResize)},onMouseDown:function(t,e,r,a){this.canResize(r,e)&&(this.resizing=!0,this.resizingType=a,this.resizingBar=this.body[e].bars[r],this.resizingRowIndex=e)},onMouseMove:function(t){if(this.resizing){var e=t.offsetX,r=this.$refs["td-".concat(this.resizingRowIndex)][0].offsetWidth,a=this.fromTime+e/r*this.timeOfTerm,n=this.resizingBar[this.resizingType],o="from"===this.resizingType?this.resizingBar.to.getTime()-a:a-this.resizingBar.from.getTime(),s=this.timeOfTerm/100;o>=s&&(n.setTime(a),this.updateBarsInRow(this.resizingRowIndex))}},onMouseUp:function(){this.resizing&&(this.resizing=!1,this.resizingType=null,this.resizingBar=null,this.resizingRowIndex=0)}}},b=h,p=(r("a8d4"),r("57eb"),r("2877")),m=Object(p["a"])(b,s,i,!1,null,"6fe9a436",null),v=m.exports,g=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},y=function(t){t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)},w=function(t){t.setHours(23),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(999)},D={name:"App",components:{ExGanttChart:v},data:function(){return{exGanttChartProps:this.makeData(7),currentBarInfo:""}},methods:{makeData:function(t){var e=new Date;y(e);var r=new Date;r.setDate(e.getDate()+(t-1)),w(r);for(var a=[],n=0;n<3;n++){var o=[{label:"Body header 1",classes:{"custom-body-header-class-1":!0},attrs:{"data-custom-body-header-attr-1":!0}},{label:"Body header 2",classes:{"custom-body-header-class-2":!0},attrs:{"data-custom-body-header-attr-2":!0}}];n>=1&&(o[0]={rowSpan:!0});for(var s=[],i=0;i<n*(n+1)+1;i++){var l=new Date(e);l.setHours(g(-6,24*t-1));var u=new Date(l);u.setHours(u.getHours()+g(6,48)),s.push({from:l,to:u,label:"Bar ".concat(n+1,"-").concat(i+1),classes:{"custom-bar-class":!0},attrs:{"data-custom-bar-attr":!0},visible:!0,allowDrag:!0,allowResize:!0})}a.push({headers:o,bars:s,classes:{"custom-body-content-class":!0},attrs:{"data-custom-body-content-attr":!0},allowDrag:!0,allowDrop:!0,allowResize:!0})}var d={from:e,to:r,headers:[{label:"Head header 1",classes:{"custom-head-header-class-1":!0},attrs:{"data-custom-head-header-attr-1":!0}},{label:"Head header 2",classes:{"custom-head-header-class-2":!0},attrs:{"data-custom-head-header-attr-2":!0}}],visibleHeaders:!0,dateFormatter:function(t){var e=["日","月","火","水","木","金","土"];return"".concat(t.getMonth()+1,"/").concat(t.getDate()," (").concat(e[t.getDay()],")")},body:a,allowParallel:!0,allowDrag:!0,allowDrop:!0,dropToLast:!0,allowResize:!0,subSeparatorSpan:6};return d},onClickBar:function(t){t.event;var e=t.bar,r=t.rowIndex,a=(t.barIndex,t.component),n=[];for(var o in e){var s="[object Date]"===Object.prototype.toString.call(e[o])?new Date(e[o]).toLocaleString():"[object Object]"===Object.prototype.toString.call(e[o])?JSON.stringify(e[o]):e[o];n.push("".concat(o,": ").concat(s))}this.currentBarInfo=n.join("\n"),y(e.from),w(e.to),a.updateBarsInRow(r)},onMouseEnterBar:function(t){t.event,t.bar,t.rowIndex,t.barIndex,t.component},onMouseLeaveBar:function(t){t.event,t.bar,t.rowIndex,t.barIndex,t.component}}},T=D,S=(r("034f"),Object(p["a"])(T,n,o,!1,null,null,null)),x=S.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(x)}}).$mount("#app")},"57eb":function(t,e,r){"use strict";r("dae0")},"85ec":function(t,e,r){},a8d4:function(t,e,r){"use strict";r("4cd7")},dae0:function(t,e,r){}});